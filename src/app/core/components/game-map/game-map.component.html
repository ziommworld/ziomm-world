<div class="map-container"
     cdkDropListGroup>
  @for (row of $currentMap().tiles; track $index; let y = $index)
  {
  <div class="map-row">
    @for (cell of row; track $index; let x = $index)
    {
    @let cellState = $tiles()[y][x];
    <div class="map-cell"
         [matMenuTriggerFor]="triggerMenu(cell)"
         [matTooltip]="getCellTooltip(cell.coord)"
         matTooltipShowDelay="100"
         cdkDropList
         [cdkDropListData]="[y, x]"
         (cdkDropListDropped)="drop($event)"
         (click)="onLeftClick($event, cell)"
         (contextmenu)="onRightClick($event, cell)">
      <!-- <div class="cell-content "
           [ngClass]="{'cell-component': cell.component}">
      </div> -->

      @if(cellState.characterId) {
      <div class="cell-content cell-character"
           cdkDrag
           [cdkDragData]="[]">
        <mat-icon color="accent">
          {{ getCharacterIcon(cellState.characterId) }}
        </mat-icon>
      </div>
      }
    </div>
    }
  </div>
  }

  <app-action-menu #actionMenu>
  </app-action-menu>
</div>
